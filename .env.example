# HOTMESS env example (safe to commit)
# Copy to .env.local for local dev. Never commit real secrets.

########################
# Supabase (REQUIRED)
########################
# You can provide either VITE_* (frontend) or non-VITE (server) vars.
# This repo‚Äôs Vite config will fall back to SUPABASE_* during build if VITE_* is not set.

# Frontend (exposed to client bundle)
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key

# Server (Vercel Functions)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your_supabase_anon_key
# Service role is required for admin/server jobs (scraper, soundcloud uploads, rate-limit cleanup, etc)
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

########################
# Routing / ETAs (OPTIONAL but recommended)
########################
GOOGLE_MAPS_API_KEY=your_google_routes_api_key
# When true, DRIVE routes can be traffic-aware.
GOOGLE_ROUTES_DRIVE_TRAFFIC_AWARE=false

########################
# Tickets / QR (RECOMMENDED for production)
########################
# If unset, some endpoints fall back to SUPABASE_ANON_KEY for signing in non-prod.
TICKET_QR_SIGNING_SECRET=replace_with_strong_random_secret

########################
# Notifications / Cron protection (RECOMMENDED)
########################
# Vercel Cron hits these endpoints; secrets prevent arbitrary internet callers.
OUTBOX_CRON_SECRET=replace_with_strong_random_secret
RATE_LIMIT_CLEANUP_SECRET=replace_with_strong_random_secret
EVENT_SCRAPER_CRON_SECRET=replace_with_strong_random_secret

########################
# Events scraper (OPTIONAL)
########################
# JSON mapping city -> array of feed URLs
EVENT_SCRAPER_SOURCES_JSON={"London":["https://example.com/london.json"]}
EVENT_SCRAPER_MAX_EVENTS_PER_CITY=15
EVENT_SCRAPER_USE_WEB_SEARCH=false

# Optional LLM fallback for scraping
OPENAI_API_KEY=your_openai_key
OPENAI_MODEL=gpt-4o-mini

########################
# SoundCloud (OPTIONAL)
########################
SOUNDCLOUD_CLIENT_ID=your_client_id
SOUNDCLOUD_CLIENT_SECRET=your_client_secret
SOUNDCLOUD_REDIRECT_URI=https://your-vercel-domain.vercel.app/api/soundcloud/callback
SOUNDCLOUD_SCOPE=non-expiring

# Control who can upload via /music UI
# Accepts CSV of allowed emails.
VITE_MUSIC_UPLOAD_EMAILS=you@yourdomain.com
# Server-side equivalent fallback
MUSIC_UPLOAD_EMAILS=you@yourdomain.com

########################
# Shopify (OPTIONAL)
########################
SHOPIFY_SHOP_DOMAIN=your-shop.myshopify.com
SHOPIFY_STOREFRONT_ACCESS_TOKEN=your_storefront_token
SHOPIFY_ADMIN_ACCESS_TOKEN=your_admin_token
SHOPIFY_ALLOWED_PRODUCT_HANDLES=handle-1,handle-2
SHOPIFY_WEBHOOK_SECRET=your_webhook_secret
SHOPIFY_CHECKOUT_DOMAIN=checkout.yourdomain.com
SHOPIFY_STOREFRONT_API_VERSION=2024-10

########################
# Feature flags (OPTIONAL)
########################
VITE_XP_PURCHASING_ENABLED=false
MEMBERSHIPS_ENABLED=false

########################
# E2E (local only)
########################
# Used by npm run test:e2e:auth
E2E_EMAIL=test.user@example.com
E2E_PASSWORD=replace_me
E2E_SEED=true
E2E_SEED_LAT=51.5074
E2E_SEED_LNG=-0.1278
E2E_SEED_COUNT=12
E2E_SEED_SPREAD_M=3000
# ‚ö†Ô∏è SECURITY WARNING: NEVER commit this file with actual values!
# This file is for documentation purposes only. Copy to .env.local with real values.
# .env and .env.local are gitignored for your protection.

# =============================================================================
# SUPABASE (Client) ‚Äî required
# =============================================================================
# Put these in `.env.local` for local dev.
# In Vercel, set these in Project ‚Üí Settings ‚Üí Environment Variables.
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key_here

# Optional back-compat (older deployments created Vercel env vars with this prefix)
# vite_publicSUPABASE_URL=
# vite_publicSUPABASE_ANON_KEY=

# Feature flags (client)
# XP purchasing is intentionally disabled by default.
VITE_XP_PURCHASING_ENABLED=false

# =============================================================================
# SUPABASE (Server) ‚Äî required for /api/* that writes to DB
# =============================================================================
# IMPORTANT: these MUST NOT be prefixed with VITE_.
# Never expose the service role key to the browser.
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your_supabase_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# =============================================================================
# SHOPIFY (Server) ‚Äî required for /market + cart/checkout
# =============================================================================
# Storefront (public shop) GraphQL
SHOPIFY_SHOP_DOMAIN=your-store.myshopify.com
SHOPIFY_API_STOREFRONT_ACCESS_TOKEN=your_storefront_api_token_here
# Optional (defaults to 2024-10)
SHOPIFY_STOREFRONT_API_VERSION=2024-10

# Branded checkout host to prevent redirects to shop.app / *.myshopify.com
# Example: shop.hotmessldn.com
SHOPIFY_CHECKOUT_DOMAIN=shop.yourbrand.com

# Optional allowlist for product handles served by /api/shopify/product
# Comma-separated handles
# SHOPIFY_ALLOWED_PRODUCT_HANDLES=hnh-mess-lube-250ml,hnh-mess-lube-50ml

# Optional (admin) token only needed for import/sync utilities
# Use the Admin API access token (NOT a storefront token)
# SHOPIFY_ADMIN_ACCESS_TOKEN=shpat_xxx

# Webhooks (server)
SHOPIFY_WEBHOOK_SECRET=your_webhook_signing_secret

# =============================================================================
# GOOGLE MAPS (Server) ‚Äî optional (routing/ETAs); app degrades gracefully
# =============================================================================
GOOGLE_MAPS_API_KEY=your_google_maps_key_here

# =============================================================================
# CRON / SCHEDULED JOBS (Server) ‚Äî optional but recommended in non-Vercel environments
# =============================================================================
# Events scraper and notifications dispatch can be run by Vercel Cron (x-vercel-cron header).
# If you want to trigger them manually or from another scheduler, set these secrets.
EVENT_SCRAPER_CRON_SECRET=your_events_cron_secret
OUTBOX_CRON_SECRET=your_notifications_cron_secret

# Back-compat name for OUTBOX_CRON_SECRET
# CRON_SECRET=

# =============================================================================
# SOUNDCLOUD (Server) ‚Äî optional (uploads + OAuth)
# =============================================================================
SOUNDCLOUD_CLIENT_ID=your_soundcloud_client_id
SOUNDCLOUD_CLIENT_SECRET=your_soundcloud_client_secret
SOUNDCLOUD_REDIRECT_URI=https://your-domain.com/api/soundcloud/callback
# Optional scopes
# SOUNDCLOUD_SCOPE=non-expiring

# =============================================================================
# TICKETS / SCAN (Server) ‚Äî required for signed ticket QR in production
# =============================================================================
# Secret used to sign/verify ticket QR payloads. Do NOT expose to the client.
TICKET_QR_SIGNING_SECRET=your_random_signing_secret

# =============================================================================
# ADMIN (Server) ‚Äî optional allowlists
# =============================================================================
# Comma-separated email allowlist for admin-only operations (if used by endpoints).
ADMIN_EMAIL_ALLOWLIST=admin@hotmess.london

# =============================================================================
# ‚ö†Ô∏è SECURITY REMINDERS
# =============================================================================
# 
# ‚úÖ DO:
# - Copy this file to .env.local and add your real values
# - Use VITE_ prefix ONLY for values that MUST be client-side
# - Keep API secret keys server-side (no VITE_ prefix)
# - Use restricted/scoped API keys when possible
# - Rotate keys immediately if accidentally committed
# 
# ‚ùå DON'T:
# - Commit .env or .env.local files
# - Put secret keys in client-side code (VITE_ variables)
# - Share keys in plaintext (Slack, email, etc.)
# - Use production keys in development
# - Hardcode any credentials in source code
#
# üìö For more information, see SECURITY.md
# =============================================================================

